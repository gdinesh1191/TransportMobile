{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Infogreen/Documents/transport-mobile/TransportMobile/src/app/utils/api.ts"],"sourcesContent":[" // utils/api.ts\r\n\r\n interface ApiOptions extends RequestInit {\r\n  // You can add custom options here if needed, e.g., 'requiresAuth: true'\r\n}\r\n\r\n// Helper function to create a delay promise\r\nfunction delay(ms: number) {\r\n  return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport async function postData<T>(\r\n  // endpoint: string,\r\n  data: any,\r\n  options?: ApiOptions\r\n): Promise<T> {\r\n  const baseUrl = 'http://192.168.1.52/index.php'; // Updated base URL\r\n  // const url = `${baseUrl}${endpoint}`;\r\n  const MIN_LOADING_TIME = 2000; // Reduced to 2 seconds for a better user experience in most cases\r\n\r\n  try {\r\n    // 1. Create the API fetch promise\r\n    const apiCallPromise = fetch(baseUrl, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n      ...options,\r\n    });\r\n\r\n    const minDelayPromise = delay(MIN_LOADING_TIME);\r\n\r\n    // 2. Wait for both the API call and the minimum delay to complete\r\n    const [apiResponseResult, delayResult] = await Promise.allSettled([apiCallPromise, minDelayPromise]);\r\n\r\n    // 3. Handle the result of the API call promise\r\n    if (apiResponseResult.status === 'rejected') {\r\n      console.error('API call error:', apiResponseResult.reason);\r\n      throw apiResponseResult.reason;\r\n    }\r\n\r\n    const response = apiResponseResult.value;\r\n\r\n    if (!response.ok) {\r\n      // Attempt to parse the error message from the response body\r\n      const errorData = await response.json().catch(() => ({ message: `HTTP error! status: ${response.status}` }));\r\n      throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\r\n    }\r\n\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('API call error:', error);\r\n    throw error; // Re-throw to be handled by the calling component/function\r\n  }\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"AAAC,eAAe;;;;AAMhB,4CAA4C;AAC5C,SAAS,MAAM,EAAU;IACvB,OAAO,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;AACpD;AAEO,eAAe,SACpB,oBAAoB;AACpB,IAAS,EACT,OAAoB;IAEpB,MAAM,UAAU,iCAAiC,mBAAmB;IACpE,uCAAuC;IACvC,MAAM,mBAAmB,MAAM,kEAAkE;IAEjG,IAAI;QACF,kCAAkC;QAClC,MAAM,iBAAiB,MAAM,SAAS;YACpC,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;YACrB,GAAG,OAAO;QACZ;QAEA,MAAM,kBAAkB,MAAM;QAE9B,kEAAkE;QAClE,MAAM,CAAC,mBAAmB,YAAY,GAAG,MAAM,QAAQ,UAAU,CAAC;YAAC;YAAgB;SAAgB;QAEnG,+CAA+C;QAC/C,IAAI,kBAAkB,MAAM,KAAK,YAAY;YAC3C,QAAQ,KAAK,CAAC,mBAAmB,kBAAkB,MAAM;YACzD,MAAM,kBAAkB,MAAM;QAChC;QAEA,MAAM,WAAW,kBAAkB,KAAK;QAExC,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,4DAA4D;YAC5D,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC;oBAAE,SAAS,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;gBAAC,CAAC;YAC1G,MAAM,IAAI,MAAM,UAAU,OAAO,IAAI,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;QAC/E;QAEA,OAAO,MAAM,SAAS,IAAI;IAC5B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mBAAmB;QACjC,MAAM,OAAO,2DAA2D;IAC1E;AACF","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Infogreen/Documents/transport-mobile/TransportMobile/src/app/approval/list/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport RootLayout from \"../../layout\";\r\nimport { postData } from \"@/app/utils/api\";\r\n\r\n// Define a type for trip data\r\ninterface Trip {\r\n  id: string;\r\n  vehicleNumber: string;\r\n  fromPlace: string;\r\n  toPlace: string;\r\n  date: string;\r\n  product: string;\r\n  quantity: string;\r\n}\r\n\r\nexport default function TripApproval() {\r\n  const [trips, setTrips] = useState<Trip[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // --- Offcanvas states ---\r\n  const [isSortOffcanvasOpen, setIsSortOffcanvasOpen] = useState(false);\r\n  const [isFilterOffcanvasOpen, setIsFilterOffcanvasOpen] = useState(false);\r\n  const [isCategoryOffcanvasOpen, setIsCategoryOffcanvasOpen] = useState(false);\r\n  const [selectedSort, setSelectedSort] = useState(\"Default\");\r\n  const [selectedVehicleNumber, setSelectedVehicleNumber] = useState<string | null>(null);\r\n  const [searchVehicleTerm, setSearchVehicleTerm] = useState(\"\");\r\n\r\n  const sortOffcanvasRef = useRef<HTMLDivElement>(null);\r\n  const filterOffcanvasRef = useRef<HTMLDivElement>(null);\r\n  const categoryOffcanvasRef = useRef<HTMLDivElement>(null);\r\n\r\n  // ðŸš€ Fetch trips from API\r\n useEffect(() => {\r\n  const fetchTrips = async () => {\r\n    try {\r\n      const payload = {\r\n        token: \"getTripSheet\",\r\n        data: {},\r\n      };\r\n\r\n      const result = await postData<any>(payload);\r\n\r\n      if (result.status === \"success\" && Array.isArray(result.tripSheets)) {\r\n        // ðŸ”‘ Only keep trips where status === \"0\"\r\n        const filtered = result.tripSheets.filter((t: any) => t.status === \"0\");\r\n\r\n        const mappedTrips: Trip[] = filtered.map((t: any) => ({\r\n          id: t.id,\r\n          vehicleNumber: t.vehicleNumber,\r\n          fromPlace: t.fromPlace,\r\n          toPlace: t.toPlace,\r\n          date: t.tripDate,\r\n          subtotal: t.subtotal,\r\n          netTotal: t.netTotal,\r\n          status: t.status, // still keep in case needed\r\n        }));\r\n\r\n        setTrips(mappedTrips);\r\n      } else {\r\n        console.error(\"API did not return trips:\", result);\r\n        setTrips([]);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching trips:\", error);\r\n      setTrips([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  fetchTrips();\r\n}, []);\r\n\r\n\r\n  // Dummy vehicle numbers list (you can also get from API if available)\r\n  const DUMMY_VEHICLE_NUMBERS: string[] = [\r\n    \"MH 12 AB 1234\",\r\n    \"MH 14 XY 5678\",\r\n    \"DL 01 ZZ 4321\",\r\n    \"KA 05 CD 8765\",\r\n    \"TN 22 GH 2345\",\r\n    \"GJ 01 KL 7890\",\r\n    \"RJ 14 MN 4567\",\r\n    \"PB 10 QR 1234\",\r\n    \"UP 32 ST 5678\",\r\n    \"WB 20 UV 9012\",\r\n  ];\r\n\r\n  // Filtered vehicle numbers for the category off-canvas search\r\n  const filteredVehicleNumbers = DUMMY_VEHICLE_NUMBERS.filter((number) =>\r\n    number.toLowerCase().includes(searchVehicleTerm.toLowerCase())\r\n  );\r\n\r\n  // âœ… Filter + sort trips from API\r\n  const sortedAndFilteredTrips = trips\r\n    .filter((trip) => {\r\n      if (selectedVehicleNumber && trip.vehicleNumber !== selectedVehicleNumber) {\r\n        return false;\r\n      }\r\n      return true;\r\n    })\r\n    .sort((a, b) => {\r\n      if (selectedSort === \"Quantity - Low to High\") {\r\n        return parseFloat(a.quantity) - parseFloat(b.quantity);\r\n      } else if (selectedSort === \"Quantity - High to Low\") {\r\n        return parseFloat(b.quantity) - parseFloat(a.quantity);\r\n      } else if (selectedSort === \"Product Name - A to Z\") {\r\n        return a.product.localeCompare(b.product);\r\n      } else if (selectedSort === \"Product Name - Z to A\") {\r\n        return b.product.localeCompare(a.product);\r\n      }\r\n      return 0;\r\n    });\r\n\r\n  // Close offcanvas when clicking outside\r\n  const handleClickOutside = useCallback((event: MouseEvent) => {\r\n    if (sortOffcanvasRef.current && !sortOffcanvasRef.current.contains(event.target as Node)) {\r\n      setIsSortOffcanvasOpen(false);\r\n    }\r\n    if (filterOffcanvasRef.current && !filterOffcanvasRef.current.contains(event.target as Node)) {\r\n      setIsFilterOffcanvasOpen(false);\r\n    }\r\n    if (categoryOffcanvasRef.current && !categoryOffcanvasRef.current.contains(event.target as Node)) {\r\n      setIsCategoryOffcanvasOpen(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [handleClickOutside]);\r\n\r\n  // Handlers for Approve/Reject\r\n  const handleApprove = (tripId: string) => {\r\n    console.log(`Trip ${tripId} Approved!`);\r\n  };\r\n\r\n  const handleReject = (tripId: string) => {\r\n    console.log(`Trip ${tripId} Rejected!`);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex-1 flex flex-col pt-16 bg-gray-50\">\r\n        <div className=\"flex items-center justify-between px-4 m-1\">\r\n          <div\r\n            className=\"flex items-center gap-4 cursor-pointer\"\r\n            onClick={() => setIsSortOffcanvasOpen(true)}\r\n            id=\"sort-btn\"\r\n          >\r\n            <span className=\"text-gray-500 text-sm font-medium\">Sort</span>\r\n            <span id=\"sort-text\" className=\"text-gray-800 text-sm font-semibold\">\r\n              {selectedSort}\r\n            </span>\r\n          </div>\r\n          <button\r\n            id=\"openFilterBtn\"\r\n            className=\"text-gray-700 text-sm flex items-center gap-1\"\r\n            onClick={() => setIsFilterOffcanvasOpen(true)}\r\n          >\r\n            <i className=\"ri-filter-2-line\"></i>\r\n            <span className=\"text-sm font-semibold\">Filter</span>\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"h-auto max-h-[calc(100vh-165px)] overflow-y-auto flex-1\">\r\n          <div className=\"mt-2 mx-4 flex flex-col\">\r\n            <div className=\"product-list space-y-2\">\r\n              {loading ? (\r\n                <div className=\"text-center text-gray-600 mt-8\">Loading trips...</div>\r\n              ) : sortedAndFilteredTrips.length === 0 ? (\r\n                <div className=\"text-center text-gray-600 mt-8\">\r\n                  No trips found matching your criteria.\r\n                </div>\r\n              ) : (\r\n                sortedAndFilteredTrips.map((trip) => (\r\n                  <div\r\n                    key={trip.id}\r\n                    className=\"relative bg-white border border-gray-100 rounded-xl p-4 max-w-md mx-auto\"\r\n                  >\r\n                    <div className=\"flex justify-between items-start\">\r\n                      <div className=\"space-y-1\">\r\n                        <div className=\"text-md font-bold text-gray-800\">\r\n                          {trip.vehicleNumber}\r\n                        </div>\r\n                        <div className=\"text-sm font-medium text-gray-700\">\r\n                          From: {trip.fromPlace}\r\n                        </div>\r\n                        <div className=\"text-sm font-medium text-gray-700\">\r\n                          To: {trip.toPlace}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"text-right space-y-1\">\r\n                        <div className=\"text-sm font-semibold text-gray-600\">{trip.date}</div>\r\n                        <div className=\"text-sm text-green-600 font-semibold\">{trip.product}</div>\r\n                        <div className=\"text-sm font-semibold text-gray-600\">Qty: {trip.quantity}</div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"mt-3 flex justify-end gap-2\">\r\n                      <button\r\n                        onClick={() => handleApprove(trip.id)}\r\n                        className=\"bg-green-600 text-white text-sm px-4 py-1.5 rounded-lg hover:bg-green-700\"\r\n                      >\r\n                        Approve\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleReject(trip.id)}\r\n                        className=\"bg-red-500 text-white text-sm px-4 py-1.5 rounded-lg hover:bg-red-600\"\r\n                      >\r\n                        Reject\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}