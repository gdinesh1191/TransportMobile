{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Pictures/TransportMobile/src/app/vehicle/report/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useRef, useEffect, useCallback } from \"react\";\r\nimport Chart from 'chart.js/auto'; // Import Chart.js\r\n\r\n// Define a type for chart data for better type safety, if needed\r\ninterface ChartData {\r\n  labels: string[];\r\n  datasets: {\r\n    label?: string;\r\n    data: number[];\r\n    borderColor?: string;\r\n    backgroundColor: string | string[];\r\n    borderWidth?: number;\r\n    tension?: number;\r\n    pointRadius?: number;\r\n    pointBackgroundColor?: string;\r\n    cutout?: string; \r\n  }[];\r\n}\r\n\r\n// Ensure Chart.js is not animated by default, if desired globally\r\n// This is typically done once at the application entry point, but placed here for direct translation.\r\n// Chart.defaults.animation = false; // Uncomment if you want to apply this globally\r\n\r\nexport default function VehicleReport() {\r\n  // Refs for the canvas elements\r\n  const tripsLineChartRef = useRef<HTMLCanvasElement>(null);\r\n  const expenseRentChartRef = useRef<HTMLCanvasElement>(null);\r\n  const optimizedChart1Ref = useRef<HTMLCanvasElement>(null);\r\n  const optimizedChart2Ref = useRef<HTMLCanvasElement>(null);\r\n  const optimizedChart3Ref = useRef<HTMLCanvasElement>(null);\r\n  const pieChartRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  // Data for the charts (can be fetched from API or managed by state in a real app)\r\n  const tripData = {\r\n    vehicleNumber: \"TN 20 SN 1298\",\r\n    tripReport: {\r\n      labels: ['2019', '2020', '2021', '2022', '2023', '2024'],\r\n      data: [120, 150, 180, 100, 200, 170],\r\n    },\r\n    profitReport: {\r\n      labels: ['2019', '2020', '2021', '2022', '2023', '2024'],\r\n      expenseData: [50000, 60000, 55000, 70000, 75000, 72000],\r\n      rentData: [40000, 45000, 47000, 50000, 52000, 53000],\r\n    },\r\n    dueDaysReport: [\r\n      { id: 'optimizedChart1', percent: 20, color: '#f97316', label: 'Permit Due', days: '20 Days' },\r\n      { id: 'optimizedChart2', percent: 43, color: '#3b82f6', label: 'FC Permit', days: '43 Days' },\r\n      { id: 'optimizedChart3', percent: 72, color: '#10b981', label: 'Pollution', days: '72 Days' },\r\n    ],\r\n    ownershipReport: {\r\n      labels: ['Ramesh', 'Suresh', 'Ganesh'],\r\n      data: [30, 40, 30],\r\n      colors: ['#f97316', '#3b82f6', '#10b981'],\r\n    },\r\n  };\r\n\r\n  // Function to create an optimized Doughnut Chart\r\n  const makeOptimizedDoughnut = useCallback((canvas: HTMLCanvasElement, percent: number, color: string) => {\r\n    new Chart(canvas, {\r\n      type: 'doughnut',\r\n      data: {\r\n        datasets: [{\r\n          data: [percent, 100 - percent],\r\n          backgroundColor: [color, '#e5e7eb'],\r\n          borderWidth: 0\r\n        }]\r\n      },\r\n      options: {\r\n        cutout: '70%',\r\n        responsive: false, // Disable responsive behavior for fixed size\r\n        maintainAspectRatio: false,\r\n        animation: {\r\n          duration: 0 // Disable animations\r\n        },\r\n        plugins: {\r\n          legend: { display: false },\r\n          tooltip: { enabled: false }\r\n        },\r\n        elements: {\r\n          arc: {\r\n            borderWidth: 0\r\n          }\r\n        },\r\n        interaction: {\r\n          intersect: false,\r\n          mode: 'nearest'\r\n        }\r\n      }\r\n    });\r\n  }, []); // Empty dependency array as this function doesn't depend on props/state that change\r\n\r\n  // Effect to render charts after component mounts\r\n  useEffect(() => {\r\n    // Trip Report Line Chart\r\n    if (tripsLineChartRef.current) {\r\n      new Chart(tripsLineChartRef.current, {\r\n        type: 'line',\r\n        data: {\r\n          labels: tripData.tripReport.labels,\r\n          datasets: [{\r\n            label: 'Trips',\r\n            data: tripData.tripReport.data,\r\n            borderColor: '#10b981',\r\n            backgroundColor: 'transparent',\r\n            borderWidth: 2,\r\n            tension: 0.3,\r\n            pointRadius: 3,\r\n            pointBackgroundColor: '#10b981'\r\n          }]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n          scales: {\r\n            x: { grid: { color: '#f3f4f6' } },\r\n            y: { beginAtZero: true, grid: { color: '#f3f4f6' } }\r\n          },\r\n          plugins: { legend: { display: false } }\r\n        }\r\n      });\r\n    }\r\n\r\n    // Profit Report Line Chart\r\n    if (expenseRentChartRef.current) {\r\n      new Chart(expenseRentChartRef.current, {\r\n        type: 'line',\r\n        data: {\r\n          labels: tripData.profitReport.labels,\r\n          datasets: [\r\n            {\r\n              label: 'Expense',\r\n              data: tripData.profitReport.expenseData,\r\n              borderColor: '#ef4444',\r\n              backgroundColor: 'transparent',\r\n              borderWidth: 2,\r\n              tension: 0.3,\r\n              pointRadius: 3,\r\n              pointBackgroundColor: '#ef4444'\r\n            },\r\n            {\r\n              label: 'Rent',\r\n              data: tripData.profitReport.rentData,\r\n              borderColor: '#10b981',\r\n              backgroundColor: 'transparent',\r\n              borderWidth: 2,\r\n              tension: 0.3,\r\n              pointRadius: 3,\r\n              pointBackgroundColor: '#10b981'\r\n            }\r\n          ]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n          scales: {\r\n            x: { grid: { color: '#f3f4f6' } },\r\n            y: { beginAtZero: true, grid: { color: '#f3f4f6' } }\r\n          },\r\n          plugins: {\r\n            legend: { labels: { font: { size: 12 } } }\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // Due Days Report Doughnut Charts\r\n    if (optimizedChart1Ref.current) {\r\n      makeOptimizedDoughnut(optimizedChart1Ref.current, tripData.dueDaysReport[0].percent, tripData.dueDaysReport[0].color);\r\n    }\r\n    if (optimizedChart2Ref.current) {\r\n      makeOptimizedDoughnut(optimizedChart2Ref.current, tripData.dueDaysReport[1].percent, tripData.dueDaysReport[1].color);\r\n    }\r\n    if (optimizedChart3Ref.current) {\r\n      makeOptimizedDoughnut(optimizedChart3Ref.current, tripData.dueDaysReport[2].percent, tripData.dueDaysReport[2].color);\r\n    }\r\n\r\n    // Ownership Report Pie Chart\r\n    if (pieChartRef.current) {\r\n      new Chart(pieChartRef.current, {\r\n        type: 'pie',\r\n        data: {\r\n          labels: tripData.ownershipReport.labels,\r\n          datasets: [{\r\n            data: tripData.ownershipReport.data,\r\n            backgroundColor: tripData.ownershipReport.colors,\r\n            borderWidth: 2,\r\n            borderColor: '#fff'\r\n          }]\r\n        },\r\n        options: {\r\n          responsive: false, // For fixed size as per original\r\n          maintainAspectRatio: false,\r\n          animation: { duration: 0 },\r\n          plugins: {\r\n            legend: {\r\n              position: 'bottom',\r\n              labels: {\r\n                padding: 20,\r\n                font: {\r\n                  size: 14\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // Cleanup function for charts (important to prevent memory leaks)\r\n    return () => {\r\n      // Destroy existing chart instances on component unmount\r\n      Chart.getChart(tripsLineChartRef.current!)?.destroy();\r\n      Chart.getChart(expenseRentChartRef.current!)?.destroy();\r\n      Chart.getChart(optimizedChart1Ref.current!)?.destroy();\r\n      Chart.getChart(optimizedChart2Ref.current!)?.destroy();\r\n      Chart.getChart(optimizedChart3Ref.current!)?.destroy();\r\n      Chart.getChart(pieChartRef.current!)?.destroy();\r\n    };\r\n  }, [tripData, makeOptimizedDoughnut]); // Re-run effect if tripData or makeOptimizedDoughnut changes (though makeOptimizedDoughnut is memoized)\r\n\r\n  const handleBackButtonClick = useCallback(() => {\r\n    window.history.back();\r\n  }, []);\r\n\r\n  return (\r\n    <main>\r\n      <header\r\n        className=\"fixed top-0 left-0 right-0 w-full z-20 flex items-center px-4 bg-white border-b border-gray-200 shadow-sm h-14\"\r\n      >\r\n        <button className=\"text-gray-800 mr-2\" onClick={handleBackButtonClick}>\r\n          <i className=\"ri-arrow-left-line text-2xl\"></i>\r\n        </button>\r\n        <span className=\"font-semibold text-gray-800 text-lg\">{tripData.vehicleNumber}</span>\r\n      </header>\r\n      <div className=\"min-h-screen flex flex-col pt-16 bg-[#f3f3f3]\">\r\n        <div className=\"h-auto max-h-[calc(100vh-100px)] overflow-y-auto flex-1\">\r\n          <div className=\"mt-2 mx-4 flex flex-col\">\r\n\r\n            <span className=\"m-2 text-gray-700 font-semibold\">Trip Report</span>\r\n            <div\r\n              className=\"product-list mt-4 bg-white border border-gray-200 rounded-2xl p-4 text-sm shadow-[0_4px_20px_rgba(0,0,0,0.05)]\"\r\n            >\r\n              <canvas id=\"tripsLineChart\" ref={tripsLineChartRef} className=\"w-full h-48\"></canvas>\r\n            </div>\r\n\r\n            <span className=\"mt-2 text-gray-700 font-semibold\">Profit Report</span>\r\n            <div\r\n              className=\"product-list mt-4 bg-white border border-gray-200 rounded-2xl p-4 text-sm shadow-[0_4px_20px_rgba(0,0,0,0.05)]\"\r\n            >\r\n              <canvas id=\"expenseRentChart\" ref={expenseRentChartRef} className=\"w-full h-48\"></canvas>\r\n            </div>\r\n\r\n            <span className=\"mt-2 text-gray-700 font-semibold\">Due Days Report</span>\r\n            <div className=\"mt-8 mb-8\">\r\n              <div className=\"grid grid-cols-3 gap-4 text-sm\">\r\n                {tripData.dueDaysReport.map((report, index) => (\r\n                  <div key={report.id} className=\"flex flex-col items-center bg-white p-4 rounded-2xl shadow\">\r\n                    {/* Set width and height explicitly for Doughnut charts for consistent rendering */}\r\n                    <canvas id={report.id} ref={\r\n                      index === 0 ? optimizedChart1Ref :\r\n                      index === 1 ? optimizedChart2Ref :\r\n                      optimizedChart3Ref\r\n                    } width=\"80\" height=\"80\"></canvas>\r\n                    <span className=\"mt-2 text-center text-gray-700\">{report.label}<br/><strong>{report.days}</strong></span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <span className=\"mt-2 text-gray-700 font-semibold\">Ownership Report</span>\r\n            <div className=\"product-list mt-4 bg-white border border-gray-200 rounded-2xl p-4 text-sm shadow-[0_4px_20px_rgba(0,0,0,0.05)]\">\r\n              <center><canvas id=\"pieChart\" ref={pieChartRef} width=\"300\" height=\"300\"></canvas></center>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}